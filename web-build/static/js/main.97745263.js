(()=>{"use strict";var e={1701:(e,t,o)=>{e.exports=o.p+"static/media/logo.5a86997c5ddc141732d8.png"},3132:(e,t,o)=>{var n=o(7687),r=o(5317),a=o(9251),i=o(6),l=o(8841),s=o(7547),d=o(4005),c=o(6688),u=o(9258),f=o(6487),g=o(6547),h=o(942),m=o(4719);const p=m.default.create({container:{flex:1,flexDirection:"row",backgroundColor:"#7c7a7aff",justifyContent:"center",alignItems:"center"},welcome:{fontSize:15,fontWeight:"600",color:"black",textAlign:"center",marginTop:30,marginBottom:10},subText:{fontSize:16,color:"white",textAlign:"center",marginBottom:20},loginButton:{borderWidth:1,borderColor:"black",borderRadius:10,paddingVertical:10,borderRadius:8,alignItems:"center",marginTop:10,marginBottom:20,marginLeft:20,marginRight:20},loginText:{color:"black",fontWeight:"bold",fontSize:16},rightBox:{flex:1,backgroundColor:"white",justifyContent:"center",padding:20,borderRadius:20,shadowColor:"#000",shadowOpacity:.1,shadowRadius:6,elevation:4,width:"90%",marginTop:50,marginBottom:50,maxWidth:400,alignSelf:"center"},startText:{fontSize:23,fontWeight:"500",textAlign:"center",marginTop:20},createText:{fontSize:25,fontWeight:"700",textAlign:"center",marginBottom:20},input:{borderWidth:1,borderColor:"#ccc",borderRadius:8,paddingHorizontal:10,height:50,marginBottom:20,fontSize:14},error:{color:"red",textAlign:"center",marginBottom:10},signUpButton:{backgroundColor:"#00CFFF",paddingVertical:12,borderRadius:8,alignItems:"center",marginTop:10},signUpButtonHover:{backgroundColor:"#dbd0d0",transform:[{scale:1.05}],shadowOpacity:1,shadowRadius:10},signUpText:{color:"white",fontWeight:"bold",fontSize:20}});var x=o(2605),b=o(2851);const y=m.default.create({header:{width:"100%",height:60,backgroundColor:"#151C24",flexDirection:"row",alignItems:"center",paddingHorizontal:15},logoContainer:{flexDirection:"row",alignItems:"center"},logo:{marginTop:-5,width:120,height:60,marginRight:-10,borderRadius:18},headerTitle:{fontSize:30,fontWeight:"bold",color:"#fff",fontFamily:"vintage-regular",fontWeight:"500"}});var w=o(3025);function j(){return(0,w.jsx)(x.default,{style:{backgroundColor:"#3B3B3B"},children:(0,w.jsx)(l.default,{style:y.header,children:(0,w.jsxs)(c.default,{style:y.logoContainer,children:[(0,w.jsx)(b.default,{source:o(1701),style:y.logo,resizeMode:"contain"}),(0,w.jsx)(s.default,{style:y.headerTitle,children:"LegalMitra"})]})})})}function C(){const{width:e}=(0,h.default)(),t=(0,a.useNavigation)(),[o,n]=(0,r.useState)({email:"",password:"",userName:""}),[i,m]=(0,r.useState)(""),x=(e,t)=>{n(o=>Object.assign({},o,{[e]:t}))};return(0,w.jsxs)(l.default,{style:{flex:1},children:[(0,w.jsx)(j,{}),(0,w.jsx)(l.default,{style:[p.container,{flexDirection:e>768?"row":"column"}],children:(0,w.jsxs)(l.default,{style:p.rightBox,children:[(0,w.jsx)(s.default,{style:p.startText,children:"Start now !!"}),(0,w.jsx)(s.default,{style:p.createText,children:"Create Account"}),(0,w.jsx)(d.default,{placeholder:"Email Address",style:p.input,value:o.email,onChangeText:e=>x("email",e)}),(0,w.jsx)(d.default,{placeholder:"Username",style:p.input,value:o.userName,onChangeText:e=>x("userName",e)}),(0,w.jsx)(d.default,{placeholder:"Password",secureTextEntry:!0,style:p.input,value:o.password,onChangeText:e=>x("password",e)}),i?(0,w.jsx)(s.default,{style:p.error,children:i}):null,(0,w.jsx)(c.default,{style:p.signUpButton,onPress:async()=>{try{const e=await f.default.post("http://localhost:5000/auth/signup",{email:o.email,password:o.password,userName:o.userName}),n=e.data?.token;n&&(await g.default.setItem("token",n),await g.default.setItem("user",JSON.stringify(e.data.user)),u.default.alert("Success","Signed up successfully!"),m(""),t.navigate("ChatTabs"))}catch(e){console.log(e.response?.data||e.message),m("Signup failed. Try again."),u.default.alert("Error","Signup failed. Please check your details.")}},children:(0,w.jsx)(s.default,{style:p.signUpText,children:"Sign Up"})}),(0,w.jsx)(s.default,{style:p.welcome,children:"Already Have An Account?"}),(0,w.jsx)(c.default,{style:p.loginButton,onPress:()=>t.navigate("Login"),children:(0,w.jsx)(s.default,{style:p.loginText,children:"Log In"})})]})})]})}const S=m.default.create({container:{flex:1,flexDirection:"row",backgroundColor:"#7c7a7aff",justifyContent:"center",alignItems:"center"},welcome:{fontSize:16,fontWeight:"600",color:"black",textAlign:"center",marginTop:30,marginBottom:10},subText:{fontSize:16,color:"white",textAlign:"center",marginBottom:20},loginButton:{borderWidth:1,borderColor:"black",borderRadius:10,paddingVertical:10,borderRadius:8,alignItems:"center",marginTop:10,marginBottom:20,marginLeft:20,marginRight:20},loginText:{color:"black",fontWeight:"bold",fontSize:16},box:{flex:1,justifyContent:"center",padding:20,backgroundColor:"white",borderRadius:20,shadowColor:"#000",shadowOpacity:.1,shadowRadius:6,elevation:4,width:"90%",marginTop:50,marginBottom:50,maxWidth:400,alignSelf:"center"},startText:{fontSize:18,fontWeight:"500",textAlign:"center",marginTop:20},createText:{fontSize:22,fontWeight:"700",textAlign:"center",marginBottom:20},input:{borderWidth:1,borderColor:"#ccc",borderRadius:8,paddingHorizontal:10,height:50,marginBottom:20,fontSize:14},error:{color:"red",textAlign:"center",marginBottom:10},signUpButton:{backgroundColor:"#00CFFF",paddingVertical:12,borderRadius:8,alignItems:"center",marginTop:10},signUpText:{color:"white",fontWeight:"bold",fontSize:20}});function k(){const{width:e}=(0,h.default)(),t=(0,a.useNavigation)(),[o,n]=(0,r.useState)({email:"",password:""}),[i,m]=(0,r.useState)(""),p=(e,t)=>{n(o=>Object.assign({},o,{[e]:t}))};return(0,w.jsxs)(l.default,{style:{flex:1},children:[(0,w.jsx)(j,{}),(0,w.jsx)(l.default,{style:[S.container,{flexDirection:e>768?"row":"column"}],children:(0,w.jsxs)(l.default,{style:S.box,children:[(0,w.jsx)(s.default,{style:S.startText,children:"Welcome back !!"}),(0,w.jsx)(s.default,{style:S.createText,children:"Login"}),(0,w.jsx)(d.default,{placeholder:"Email Address",style:S.input,value:o.email,onChangeText:e=>p("email",e)}),(0,w.jsx)(d.default,{placeholder:"Password",secureTextEntry:!0,style:S.input,value:o.password,onChangeText:e=>p("password",e)}),i?(0,w.jsx)(s.default,{style:S.error,children:i}):null,(0,w.jsx)(c.default,{style:S.signUpButton,onPress:async()=>{try{const e=await f.default.post("http://localhost:5000/auth/login",o);console.log("Full response:",e.data);const{token:n,user:r}=e.data;n&&r?(await g.default.setItem("token",n),await g.default.setItem("user",JSON.stringify(r)),u.default.alert("Success","Login successful!"),m(""),t.navigate("ChatTabs")):u.default.alert("Error","Login failed: Token or user data missing")}catch(e){console.error(e.response?.data||"Login failed"),m("Login failed. Please check your credentials."),u.default.alert("Error","Login failed. Please try again.")}},children:(0,w.jsx)(s.default,{style:S.signUpText,children:"Login"})}),(0,w.jsx)(s.default,{style:S.welcome,children:"New to the app?"}),(0,w.jsx)(c.default,{style:S.loginButton,onPress:()=>t.navigate("SignUp"),children:(0,w.jsx)(s.default,{style:S.loginText,children:"Sign Up"})})]})})]})}var v=o(7924),B=o(9221),T=o(4628);const I=m.default.create({container:{flex:1,backgroundColor:"#282828ff"},navbar:{height:70,backgroundColor:"#151C24",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:15},logoContainer:{flexDirection:"row",alignItems:"center",backgroundColor:"#151C24"},logo:{width:120,height:60,marginRight:8,backgroundColor:"#151C24"},headerTitle:{fontSize:30,marginLeft:-10,fontWeight:"bold",color:"#ffff",fontFamily:"vintage-regular"},loginButton:{backgroundColor:"#00CFFF",height:50,width:200,marginRight:20,borderRadius:50,justifyContent:"center",alignItems:"center"},loginText:{color:"#fff",fontSize:20,fontWeight:"700"},heroTitle:{textAlign:"center",marginTop:70,marginLeft:50,marginRight:50,fontSize:40,color:"white",fontWeight:"bold",textShadowColor:"rgba(0, 255, 255, 0.8)",textShadowOffset:{width:0,height:0},textShadowRadius:30},heroSubtitle:{marginTop:30,textAlign:"center",marginLeft:50,marginRight:50,fontSize:22,color:"#00CFFF"},content:{marginTop:100,minHeight:700,width:"100%",backgroundColor:"#282828ff",flexDirection:"row",justifyContent:"space-around",flexWrap:"wrap",paddingBottom:50},contentBox:{marginTop:100,height:350,width:"90%",maxWidth:400,borderRadius:50,backgroundColor:"#0B1E33",alignItems:"center",padding:20,transitionDuration:"0.3s",shadowColor:"#000",shadowOpacity:.1,shadowOffset:{width:2,height:4},shadowRadius:6},contentBoxHover:{backgroundColor:"#76a1b4ff",transform:[{scale:1.05}],shadowColor:"#00CFFF",shadowOpacity:.4,shadowOffset:{width:0,height:8},shadowRadius:20},boxIcon:{fontSize:50,marginTop:5},boxTitle:{fontSize:25,fontWeight:"bold",marginTop:50,textAlign:"center",color:"#fff"},boxText:{fontSize:16,fontWeight:"500",marginTop:30,textAlign:"center",width:"90%",color:"#fff"},footer:{height:500,backgroundColor:"#151C24",justifyContent:"center",alignItems:"center"},footerTitle:{fontSize:30,fontWeight:"bold",color:"white",marginBottom:20,textShadowColor:"rgba(0, 255, 255, 0.8)",textShadowOffset:{width:0,height:0},textShadowRadius:20},footerSubtitle:{fontSize:18,color:"white",marginBottom:30,textAlign:"center",marginLeft:15,marginRight:15,textShadowColor:"rgba(0, 255, 255, 0.8)",textShadowOffset:{width:0,height:0},textShadowRadius:10},footerButton:{backgroundColor:"#00CFFF",height:70,width:200,borderRadius:50,justifyContent:"center",alignItems:"center",transitionDuration:"0.3s"},footerButtonText:{fontSize:24,color:"white",fontWeight:"bold"}});function R(){const e=(0,a.useNavigation)(),[t,n]=(0,r.useState)(null);return(0,w.jsx)(x.default,{style:I.container,children:(0,w.jsxs)(v.default,{children:[(0,w.jsxs)(l.default,{style:I.navbar,children:[(0,w.jsxs)(l.default,{style:I.logoContainer,children:[(0,w.jsx)(b.default,{source:o(1701),style:I.logo,resizeMode:"contain"}),(0,w.jsx)(s.default,{style:I.headerTitle,children:"LegalMitra"})]}),(0,w.jsx)(c.default,{style:I.loginButton,onPress:()=>e.navigate("Login"),children:(0,w.jsx)(s.default,{style:I.loginText,children:"Login / Sign Up"})})]}),(0,w.jsx)(s.default,{style:I.heroTitle,children:"Secure Your Legacy with AI-Powered Document Analysis"}),(0,w.jsx)(s.default,{style:I.heroSubtitle,children:"Instantly score legal documents, protect against fraud, and get clear answers from an AI assistant"}),(0,w.jsx)(l.default,{style:I.content,children:[{id:1,icon:"upload",color:"#43D9D9",title:"Upload Your Documents",text:"Simply click a photo of your legal document, upload it, and let our AI provide a clear."},{id:2,icon:"comment-alt",color:"rgb(100,209,100)",title:"Get Instant AI Consultation",text:"Chat with our AI about your documents. Ask questions, clarify clauses, and understand complex legal terms without the hassle."},{id:3,icon:"lock",color:"rgb(217,184,123)",title:"Keep Your Records Secure",text:"Your documents and their scores are saved securely. Track your history and access past insights whenever you need them."}].map(e=>(0,w.jsxs)(B.default,{style:[I.contentBox,t===e.id&&I.contentBoxHover],onMouseEnter:()=>n(e.id),onMouseLeave:()=>n(null),children:[(0,w.jsx)(T.default,{name:e.icon,size:50,color:e.color,style:I.boxIcon}),(0,w.jsx)(s.default,{style:I.boxTitle,children:e.title}),(0,w.jsx)(s.default,{style:I.boxText,children:e.text})]},e.id))}),(0,w.jsxs)(l.default,{style:I.footer,children:[(0,w.jsx)(s.default,{style:I.footerTitle,children:"Ready To Get Started?"}),(0,w.jsx)(s.default,{style:I.footerSubtitle,children:"Gain peace of mind and protect yourself from fraud"}),(0,w.jsx)(c.default,{style:I.footerButton,onPress:()=>e.navigate("Login"),children:(0,w.jsx)(s.default,{style:I.footerButtonText,children:"Get Started"})})]})]})})}var z=o(5706),O=o(4691),W=o(623),F=o(7438),E=o(9664),A=o(8782),L=o(4755),P=o(3877);const{width:D,height:N}=P.default.get("window"),H=e=>m.default.create({container:{flex:1,backgroundColor:"#490606ff",paddingBottom:60},chatArea:{flex:1,padding:10,width:"55%",alignSelf:"center",backgroundColor:"transparent"},mode_container:{position:"absolute",marginLeft:1100,zIndex:200,marginLeft:1800,marginTop:12},messageBubble:{marginVertical:5,padding:10,borderRadius:10,maxWidth:"80%",minWidth:50},userBubble:{alignSelf:"flex-end",backgroundColor:e.userBubble},botBubble:{alignSelf:"flex-start",backgroundColor:e.botBubble},messageText:{fontSize:16,color:"black"},fileContainer:{marginTop:5,padding:5,backgroundColor:"#ddd",borderRadius:5},fileLink:{color:"blue",textDecorationLine:"underline"},fileImage:{width:120,height:120,borderRadius:8},container:{flex:1,height:N,width:D},content:{flex:1,alignItems:"center"},topbar:{width:"100%",height:64,backgroundColor:e.background,justifyContent:"center",alignItems:"flex-end",paddingRight:10},topbarButton:{height:50,width:100,justifyContent:"center",alignItems:"center",backgroundColor:e.heading,borderRadius:30,marginRight:10},bottomContainer:{width:"100%",borderColor:"#ddd",paddingBottom:5,alignSelf:"center",justifyContent:"center",alignItems:"center",marginBottom:20},previewContainer:{flexDirection:"row",padding:5,borderTopLeftRadius:5,borderTopRightRadius:5,maxHeight:80},fileBox:{marginRight:8,position:"relative",backgroundColor:"#f1f1f1",padding:5,borderRadius:5,minWidth:80,maxWidth:120,alignItems:"center",justifyContent:"center",borderWidth:1,borderColor:"#ddd"},removeBtn:{position:"absolute",top:-5,right:-5,backgroundColor:"red",borderRadius:10,paddingHorizontal:5},fileName:{fontSize:12,color:"black"},dropdown:{height:53,width:170,paddingLeft:5,borderRadius:5,backgroundColor:e.cardBackground,borderWidth:0,fontSize:18,marginLeft:10,marginRight:10},search:{alignSelf:"center",width:"100%",justifyContent:"center",alignItems:"center"},inner:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"95%",maxWidth:1e3,padding:5,borderRadius:10,marginLeft:10},textarea:{flex:1,backgroundColor:e.cardBackground,shadowColor:e.shadowbackground,color:"black",paddingHorizontal:10,paddingVertical:6,fontSize:16,lineHeight:20,textAlignVertical:"top"},switch:{marginLeft:5,justifyContent:"center",alignItems:"center",backgroundColor:e.heading,height:55,width:50,borderRadius:5},switchHovered:Object.assign({},{transform:[{scale:1.05}],shadowColor:e.shadowbackground,shadowOpacity:.4,shadowOffset:{width:0,height:8},shadowRadius:20,cursor:"pointer"}),add:{marginRight:-0,justifyContent:"center",alignItems:"center",height:52,width:40,backgroundColor:e.heading,borderRadius:0,borderTopLeftRadius:5,borderBottomLeftRadius:5},below:{flex:1,width:"100%",backgroundColor:"white"},hidden:{display:"none"}});var U=o(2350),M=o(3449);const V={background:"#F2F2F2",cardBackground:"white",text:"#000",userBubble:"#cfe1fc",botBubble:"#EAEAEA",cardTop:"rgba(31, 41, 55, 0.7)",topBar:"#ffffff",heading:"#f59e0b",headingbackground:"#fff",shadowbackground:"#6b7280"},_={background:"#1A1A1A",color:"#E0E0E0",cardBackground:"#535252ff",text:"#fff",userBubble:"#0D3B66",botBubble:"#292828ff",cardTop:"#0C1122",topBar:"#222222",heading:"#00CFFF",headingbackground:"rgba(0, 255, 255, 0.8)",shadowbackground:"#00CFFF"},$="http://localhost:5000";function J(){const e=(0,a.useRoute)(),t=(0,a.useNavigation)(),[o,n]=(0,r.useState)(!1),[i,u]=(0,r.useState)(""),[h,m]=(0,r.useState)([]),[p,x]=(0,r.useState)([]),[y,C]=(0,r.useState)(e.params?.notebookId||""),[S,k]=(0,r.useState)(null),[B,T]=(0,r.useState)("en"),I=o?_:V,R=H(I);(0,a.useFocusEffect)((0,r.useCallback)(()=>{(async()=>{const e=await g.default.getItem("darkMode");null!==e&&n(JSON.parse(e))})()},[])),(0,a.useFocusEffect)((0,r.useCallback)(()=>{if(e.params?.photo){const t={uri:e.params.photo.startsWith("file://")?e.params.photo:"file://"+e.params.photo,name:"photo.png",type:"image/png"};m(e=>[...e,t]),e.params.photo=null}},[e.params]));const z=(0,r.useCallback)(async e=>{try{const t=await g.default.getItem("user");if(!t)return void x([]);const{userId:o}=JSON.parse(t);if(e){const t=await f.default.get(`${$}/api/chat/${o}/${e}`);x(Array.isArray(t.data.messages)?t.data.messages:[])}else x([])}catch(t){console.log("Error fetching chat:",t.message),x([]),C("")}},[]);(0,a.useFocusEffect)((0,r.useCallback)(()=>{e.params?.notebookId?(C(e.params.notebookId),z(e.params.notebookId)):y?z(y):x([])},[e.params?.notebookId,y]));const P=async()=>{try{const t=await g.default.getItem("user");if(!t)return;const{userId:o}=JSON.parse(t);if(!i.trim()&&0===h.length)return;if(!y&&0===h.length)return void alert("Please upload at least one file to start a new chat.");if(h.length>0){console.log("Processing files with AI...");const t={"Doc1.pdf":"Doc1","Doc2.pdf":"Doc2","Doc3.pdf":"Doc3"};for(const o of h)try{const e=o.name||"",n=t[e];if(!n){const t={sender:"bot",message:`Document "${e}" is not supported. Please use Doc1.pdf, Doc2.pdf, or Doc3.pdf`,language:B,timestamp:(new Date).toISOString()};x(e=>[...e,t]);continue}console.log("Processing document:",n);const r=await f.default.post(`${$}/api/process-selected-document`,{documentType:n,language:B},{headers:{"Content-Type":"application/json"}});console.log("AI processing response:",r.data);const a={sender:"bot",message:`Document "${e}" processed successfully!\n\nSummary: ${r.data.summary}\n\nYou can now ask questions about this document.`,language:B,timestamp:(new Date).toISOString()};x(e=>[...e,a])}catch(e){console.error("Error processing file with AI:",e);const t={sender:"bot",message:`Error processing document "${o.name}": ${e.response?.data?.error?.message||e.message}`,language:B,timestamp:(new Date).toISOString()};x(e=>[...e,t])}return void m([])}const n=new FormData;n.append("userId",o),n.append("notebookId",y||"");const r=[{sender:"user",message:i,file:null,language:B}];n.append("messages",JSON.stringify(r));const a=await f.default.post(`${$}/api/chat/${o}`,n,{headers:{Accept:"application/json"}});y||C(a.data.notebookId),x(Array.isArray(a.data.messages)?a.data.messages:[]),u("")}catch(t){console.log("Error sending chat:",t?.message||t,t?.response?.data||"")}};return(0,w.jsx)(l.default,{style:{flex:1,backgroundColor:I.background},children:(0,w.jsx)(F.default,{onPress:void 0,accessible:!1,children:(0,w.jsxs)(l.default,{style:R.container,children:[(0,w.jsx)(j,{}),(0,w.jsx)(l.default,{style:R.topbar,children:(0,w.jsx)(c.default,{style:R.topbarButton,onPress:()=>{u(""),m([]),x([]),C(""),t.setParams({notebookId:void 0,photo:void 0})},children:(0,w.jsx)(s.default,{style:{color:I.text,fontWeight:"500",fontSize:16},children:"New Chat"})})}),(0,w.jsx)(l.default,{style:R.mode_container,children:(0,w.jsx)(c.default,{onPress:()=>n(!o),children:(0,w.jsx)(O.default,{name:o?"sunny":"moon",size:32,color:o?"#BEBEBE":"#fff"})})}),(0,w.jsxs)(W.default,{style:{flex:1},behavior:"height",keyboardVerticalOffset:10,children:[(0,w.jsx)(l.default,{style:R.content,children:(0,w.jsx)(v.default,{style:R.chatArea,children:p.map((e,t)=>(0,w.jsxs)(l.default,{style:[R.messageBubble,"user"===e.sender?R.userBubble:R.botBubble],children:[e.message&&(0,w.jsx)(s.default,{style:[R.messageText,{color:I.text}],children:e.message}),e.file&&(0,w.jsx)(c.default,{onPress:()=>E.default.openURL(e.file.fileUrl),style:R.fileContainer,children:e.file.fileType.startsWith("image/")?(0,w.jsx)(b.default,{source:{uri:e.file.fileUrl},style:R.fileImage,resizeMode:"cover"}):(0,w.jsx)(s.default,{style:[R.fileLink,{color:I.text}],children:e.file.fileName})}),"bot"===e.sender&&e.audioUrl&&(0,w.jsx)(c.default,{style:R.speakerButton,onPress:()=>async function(e){try{S&&await S.unloadAsync();const{sound:t}=await U.Sound.createAsync({uri:e},{shouldPlay:!0});k(t)}catch(t){console.error("Error playing audio:",t)}}(e.audioUrl),children:(0,w.jsx)(O.default,{name:"volume-high",size:20,color:I.text})})]},t))})}),(0,w.jsx)(l.default,{style:R.search,children:(0,w.jsxs)(l.default,{style:R.bottomContainer,children:[h.length>0&&(0,w.jsx)(v.default,{horizontal:!0,style:R.previewContainer,showsHorizontalScrollIndicator:!1,children:h.map((e,t)=>(0,w.jsxs)(l.default,{style:R.fileBox,children:[e.type.startsWith("image/")?(0,w.jsx)(b.default,{source:{uri:e.uri},style:{width:60,height:60,borderRadius:5}}):(0,w.jsx)(s.default,{numberOfLines:1,style:[R.fileName,{color:I.text}],children:e.name}),(0,w.jsx)(c.default,{style:R.removeBtn,onPress:()=>(e=>m(t=>t.filter((t,o)=>o!==e)))(t),children:(0,w.jsx)(s.default,{style:{color:"white",fontSize:12},children:"x"})})]},t))}),(0,w.jsxs)(l.default,{style:R.inner,children:[(0,w.jsx)(c.default,{style:R.add,onPress:async()=>{try{const e=await L.getDocumentAsync({multiple:!0});if(!e.canceled){const t=(e.assets||[e]).map(e=>({uri:e.uri.startsWith("file://")?e.uri:"file://"+e.uri,name:e.name,type:e.mimeType||e.type||"application/octet-stream"}));m(e=>[...e,...t])}}catch(e){console.log("Error picking document:",e)}},children:(0,w.jsx)(s.default,{style:{color:I.text,fontSize:24},children:"+"})}),(0,w.jsx)(d.default,{style:[R.textarea,{color:I.text,borderColor:I.text}],value:i,onChangeText:u,placeholder:"Upload files and start asking questions...",placeholderTextColor:I.text,multiline:!0,blurOnSubmit:!1,onKeyPress:({nativeEvent:e})=>{"Enter"!==e.key||e.shiftKey||P()}}),(0,w.jsx)(l.default,{style:R.dropdownWrapper,children:(0,w.jsxs)(M.Picker,{selectedValue:B,style:[R.dropdown,{color:I.text}],onValueChange:e=>T(e),children:[(0,w.jsx)(M.Picker.Item,{label:"English",value:"en"}),(0,w.jsx)(M.Picker.Item,{label:"\u0939\u093f\u0902\u0926\u0940",value:"hi"}),(0,w.jsx)(M.Picker.Item,{label:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",value:"pu"}),(0,w.jsx)(M.Picker.Item,{label:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",value:"ta"})]})}),(0,w.jsx)(c.default,{style:R.switch,onPress:i||h.length>0?P:()=>alert("Mic pressed!"),children:i||h.length>0?(0,w.jsx)(A.default,{name:"send",size:22,color:I.text}):(0,w.jsx)(A.default,{name:"microphone",size:24,color:I.text})})]})]})})]})]})})})}var Y=o(3588),G=o(9620);const{width:q,height:K}=P.default.get("window"),Q=e=>m.default.create({container:{flex:1,backgroundColor:e.background,paddingBottom:60},top:{width:"100%",paddingHorizontal:20,paddingVertical:5,borderBottomWidth:2,height:60,flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"#3b3b3bff"},profile:{flexDirection:"row",alignItems:"center",gap:.01*q},avatar:{height:50,width:50,borderRadius:35,borderWidth:3,borderColor:"#ccc"},profileName:{fontSize:20,fontWeight:"600",color:"white"},mode_container:{position:"relative",marginLeft:1500,zIndex:200},settings_container:{position:"relative",zIndex:300},dropdown:{position:"absolute",right:0,top:40,backgroundColor:"white",borderWidth:1,borderColor:"#ddd",borderRadius:5,shadowColor:"#000",shadowOpacity:.2,shadowRadius:4,width:160,zIndex:9999},dropdown_item:{paddingVertical:10,paddingHorizontal:15,fontSize:16},hr:{height:1,backgroundColor:"#c8c6c6",alignSelf:"stretch",marginVertical:4,zIndex:-1},history:{marginTop:50,alignItems:"center",justifyContent:"center",marginBottom:-60},historyHeading:{fontSize:48,fontWeight:"bold",color:e.heading,fontSize:40,fontWeight:"bold",textShadowColor:e.headingbackground,textShadowOffset:{width:0,height:0},textShadowRadius:10},scrollContainer:Object.assign({flex:1,width:"100%"},{overflowY:"auto"}),historySection:{flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",width:"90%",alignSelf:"center",paddingVertical:20,gap:20},historyCard:Object.assign({width:"30%",width:200,color:"#CFCFCF",height:200,backgroundColor:e.cardBackground,borderRadius:10,padding:10,shadowColor:"#000",shadowOpacity:.1,shadowOffset:{width:3,height:6},shadowRadius:4,transform:[{scale:1}],marginBottom:15},{transitionDuration:"300ms"},{marginLeft:15,marginRight:15,justifyContent:"center"}),historyCardHovered:Object.assign({},{transform:[{scale:1.05}],shadowColor:e.shadowbackground,shadowOpacity:.4,shadowOffset:{width:0,height:8},shadowRadius:20,cursor:"pointer"}),historyCardTop:{height:.06*K,backgroundColor:e.cardTop,borderRadius:10,color:"#CFCFCF",alignItems:"center",justifyContent:"center",paddingHorizontal:5,overflow:"hidden"},cardTitle:{color:"white",fontWeight:"bold",fontSize:22,overflow:"hidden"},historyCardBottom:{flex:1,padding:10,color:e.text,opacity:.8,overflow:"hidden"},flat_list:{flex:1,maxHeight:"100%",width:"70%",maxWidth:750}}),{height:X,width:Z}=P.default.get("window"),ee=()=>{const[e,t]=(0,r.useState)(!1),[o,n]=(0,r.useState)([]),[i,d]=(0,r.useState)({}),[u,h]=(0,r.useState)(null),m=e?_:V,p=Q(m),y=(0,a.useNavigation)();(0,r.useEffect)(()=>{(async()=>{const e=await g.default.getItem("darkMode");null!==e&&t(JSON.parse(e))})()},[]),(0,r.useEffect)(()=>{g.default.setItem("darkMode",JSON.stringify(e))},[e]);(0,a.useFocusEffect)((0,r.useCallback)(()=>{(async()=>{try{const e=await g.default.getItem("user");if(!e)return;const t=JSON.parse(e);d(t);const{userId:o}=t,r=await f.default.get(`http://localhost:5000/api/chat/${o}`);n(r.data)}catch(e){console.log("Error fetching notebooks:",e.message)}})()},[]));return(0,w.jsxs)(l.default,{style:p.container,children:[(0,w.jsx)(x.default,{style:{backgroundColor:m.topbar},children:(0,w.jsxs)(l.default,{style:p.top,children:[(0,w.jsxs)(l.default,{style:p.profile,children:[(0,w.jsx)(b.default,{source:i.profilePic,style:p.avatar}),(0,w.jsxs)(s.default,{style:p.profileName,children:["Welcome ",i.userName||"GEN AI"," !!"]})]}),(0,w.jsx)(l.default,{style:p.mode_container,children:(0,w.jsx)(c.default,{onPress:()=>t(!e),children:(0,w.jsx)(O.default,{name:e?"sunny":"moon",size:32,color:e?"#BEBEBE":"#fff"})})}),(0,w.jsx)(l.default,{style:p.settings_container,children:(0,w.jsx)(c.default,{onPress:async()=>{try{await g.default.clear(),y.reset({index:0,routes:[{name:"Home"}]})}catch(e){console.log("Logout error:",e)}},children:(0,w.jsx)(s.default,{style:{color:"#00CFFF",fontSize:20,fontWeight:"700"},children:"Logout"})})})]})}),(0,w.jsxs)(l.default,{style:[p.history,{flex:1}],children:[(0,w.jsx)(s.default,{style:p.historyHeading,children:"HISTORY"}),0===o.length?(0,w.jsx)(s.default,{style:{color:m.text},children:"No History Available..."}):(0,w.jsx)(Y.default,{data:o,keyExtractor:(e,t)=>t.toString(),numColumns:3,showsVerticalScrollIndicator:!0,contentContainerStyle:[p.historySection,{paddingBottom:100}],style:[p.flat_list,{flex:1}],renderItem:({item:e,index:t})=>(0,w.jsxs)(c.default,{style:[p.historyCard,u===t&&p.historyCardHovered],onPress:()=>y.navigate("Chat",{notebookId:e.notebookId}),onMouseEnter:()=>h(t),onMouseLeave:()=>h(null),children:[(0,w.jsx)(G.LinearGradient,{colors:[m.cardTop,m.cardTop+"80"],start:{x:0,y:0},end:{x:1,y:0},style:p.historyCardTop,children:(0,w.jsx)(s.default,{style:p.cardTitle,numberOfLines:1,ellipsizeMode:"tail",children:e.title})}),(0,w.jsx)(s.default,{style:p.historyCardBottom,numberOfLines:3,ellipsizeMode:"tail",children:e.preview})]})})]})]})};var te=o(7628);function oe(){const e=(0,a.useNavigation)(),[t,o]=(0,r.useState)(null),[n,i]=(0,r.useState)(!1),[d,u]=(0,r.useState)(null),f=(0,r.useRef)(null),g=(0,r.useRef)(null),h=(0,r.useRef)(null),m=(0,r.useRef)(te.default.currentState);(0,r.useEffect)(()=>{const e=te.default.addEventListener("change",e=>{"active"===m.current&&e.match(/inactive|background/)&&x(),m.current=e});return()=>e.remove()},[]);const p=async()=>{try{const e=await navigator.mediaDevices.getUserMedia({video:!0});h.current=e,g.current&&(g.current.srcObject=e),o(!0)}catch{o(!1)}},x=()=>{h.current&&(h.current.getTracks().forEach(e=>e.stop()),h.current=null),f.current&&f.current.pausePreview?.()};return(0,r.useEffect)(()=>{null===t&&p()},[]),(0,a.useFocusEffect)(r.useCallback(()=>(t&&(h.current||p()),()=>x()),[t,d])),null===t?(0,w.jsx)(l.default,{style:ne.center,children:(0,w.jsx)(s.default,{children:"Requesting camera permission..."})}):!1===t?(0,w.jsx)(l.default,{style:ne.center,children:(0,w.jsx)(s.default,{children:"No access to camera"})}):d?(0,w.jsxs)(l.default,{style:ne.previewContainer,children:[(0,w.jsx)(b.default,{source:{uri:d},style:ne.previewImage}),(0,w.jsx)(c.default,{style:ne.doneButton,onPress:()=>{e.navigate("Chat",{photo:d}),u(null)},children:(0,w.jsx)(s.default,{style:ne.doneText,children:"Done"})}),(0,w.jsx)(c.default,{style:ne.retakeButton,onPress:()=>u(null),children:(0,w.jsx)(s.default,{style:ne.retakeText,children:"Retake"})})]}):(0,w.jsxs)(l.default,{style:ne.container,children:[(0,w.jsx)("video",{ref:g,style:ne.webCamera,autoPlay:!0,playsInline:!0}),(0,w.jsx)(c.default,{style:ne.floatingButton,onPress:async()=>{if(g.current){const e=document.createElement("canvas");e.width=g.current.videoWidth,e.height=g.current.videoHeight;e.getContext("2d").drawImage(g.current,0,0,e.width,e.height),u(e.toDataURL("image/png"))}else if(f.current&&n){const e=await f.current.takePictureAsync();u(e.uri)}}})]})}const ne=m.default.create({container:{flex:1,backgroundColor:"#000"},center:{flex:1,justifyContent:"center",alignItems:"center"},camera:{flex:1},webCamera:{width:"100%",height:"100%"},floatingButton:{position:"absolute",bottom:80,alignSelf:"center",width:70,height:70,borderRadius:35,backgroundColor:"white",borderWidth:5,borderColor:"#ccc"},previewContainer:{flex:1,backgroundColor:"#000"},previewImage:{flex:1,resizeMode:"contain"},doneButton:{position:"absolute",top:40,right:20,backgroundColor:"#4DBF99",paddingVertical:10,paddingHorizontal:15,borderRadius:8},doneText:{color:"#fff",fontWeight:"bold",fontSize:16},retakeButton:{position:"absolute",bottom:40,alignSelf:"center",backgroundColor:"rgba(255,255,255,0.8)",paddingVertical:10,paddingHorizontal:20,borderRadius:8},retakeText:{color:"#000",fontWeight:"bold",fontSize:16}}),re=(0,z.createBottomTabNavigator)();function ae({children:e,onPress:t}){return(0,w.jsx)(c.default,{style:le.cameraButton,onPress:t,children:(0,w.jsx)(l.default,{style:le.innerCircle,children:e})})}function ie(){const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{(async()=>{const e=await g.default.getItem("darkMode");null!==e&&t(JSON.parse(e))})()},[]),(0,r.useEffect)(()=>{g.default.setItem("darkMode",JSON.stringify(e))},[e]),(0,w.jsxs)(re.Navigator,{initialRouteName:"Chat",screenOptions:{headerShown:!1,tabBarShowLabel:!1,tabBarStyle:{backgroundColor:"#3B3B3B",height:80,borderTopWidth:0}},children:[(0,w.jsx)(re.Screen,{name:"Profile",component:ee,options:{tabBarIcon:({focused:e})=>(0,w.jsx)(O.default,{name:"person-circle-outline",size:40,color:e?"#2563EB":"#00CFFF",style:{marginBottom:-10,marginRight:-10}})}}),(0,w.jsx)(re.Screen,{name:"Camera",component:oe,options:{unmountOnBlur:!0,tabBarButton:e=>(0,w.jsx)(ae,Object.assign({},e,{children:(0,w.jsx)(O.default,{name:"camera",size:40,color:"#ffffff"})}))}}),(0,w.jsx)(re.Screen,{name:"Chat",component:J,options:{tabBarIcon:({focused:e})=>(0,w.jsx)(O.default,{name:"chatbubble-ellipses-outline",size:40,color:e?"#2563EB":"#00CFFF",style:{marginBottom:-10,marginRight:-10}})}})]})}const le=m.default.create({cameraButton:{top:-20,justifyContent:"center",alignItems:"center"},innerCircle:{width:80,height:80,borderRadius:40,backgroundColor:"#00CFFF",justifyContent:"center",alignItems:"center",elevation:5}});var se=o(4290);function de(){const e=(0,a.useNavigation)();return(0,r.useEffect)(()=>{(async()=>{try{await g.default.getItem("token")?e.reset({index:0,routes:[{name:"ChatTabs"}]}):e.reset({index:0,routes:[{name:"Home"}]})}catch(t){console.error("Error checking login status:",t),e.reset({index:0,routes:[{name:"Home"}]})}})()},[e]),(0,w.jsx)(l.default,{style:ce.container,children:(0,w.jsx)(se.default,{size:"large",color:"#f59e0b"})})}const ce=m.default.create({container:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#111827"}}),ue=(0,i.createNativeStackNavigator)();(0,n.default)(function(){return(0,w.jsx)(a.NavigationContainer,{children:(0,w.jsxs)(ue.Navigator,{screenOptions:{headerShown:!1},children:[(0,w.jsx)(ue.Screen,{name:"AuthLoading",component:de}),(0,w.jsx)(ue.Screen,{name:"Home",component:R}),(0,w.jsx)(ue.Screen,{name:"Login",component:k}),(0,w.jsx)(ue.Screen,{name:"SignUp",component:C}),(0,w.jsx)(ue.Screen,{name:"ChatTabs",component:ie})]})})})}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,o),a.exports}o.m=e,(()=>{var e=[];o.O=(t,n,r,a)=>{if(!n){var i=1/0;for(c=0;c<e.length;c++){for(var[n,r,a]=e[c],l=!0,s=0;s<n.length;s++)(!1&a||i>=a)&&Object.keys(o.O).every(e=>o.O[e](n[s]))?n.splice(s--,1):(l=!1,a<i&&(i=a));if(l){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,r,a]}})(),o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="/",(()=>{var e={792:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[i,l,s]=n,d=0;if(i.some(t=>0!==e[t])){for(r in l)o.o(l,r)&&(o.m[r]=l[r]);if(s)var c=s(o)}for(t&&t(n);d<i.length;d++)a=i[d],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(c)},n=self.webpackChunkweb=self.webpackChunkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=o.O(void 0,[164],()=>o(3132));n=o.O(n)})();
//# sourceMappingURL=main.97745263.js.map